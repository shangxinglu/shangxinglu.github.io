# 基本使用

## 打包目录的自动清除
    使用`clean-webpack-plugin`插件

```JavaScript
    const {CleanWebpackPlugin} = require('clean-webpack-plugin');

    module.exports = {
    plugins:[
        new CleanWebpackPlugin(),
    ]
}
```

## index.html自动构建
    使用`html-webpack-plugin`插件，能够自动引入当前的入口js文件

```JavaScript
    const HtmlWebpackPlugin = require('html-webpack-plugin');
    module.exports = {
    plugins:[
        new HtmlWebpackPlugin({title:'basic'}),
    ]
```


## CSS解析
    使用`css-loader`和`style-loader`加载器
    `css-loader`用来解析@import和url(),
    `style-loader`用来将css生成到style标签，或者生成link引入标签

```JavaScript
    module.exports = {
        module:{
            rules:[
                {test:/\.css$/,use:['style-loader','css-loader']}
            ]
        }
    }
```

## Scss解析
    使用`dart-sass`和'sass-loader'，相比`node-sass`，`dart-sass`的性能更好，
    而且是官方未来开发的方向

```JavaScript
    module.exports = {
        module:{
            rules:[
                { 
                    test: /\.scss$/, 
                    use: [
                        'style-loader', 
                        'css-loader',
                        {
                            loader:'sass-loader',
                            options:{
                                implementation:require('dart-sass'),
                            }
                        }
                    ] 
                },
            ]
        }
    }
```

## 加载图片和字体
    图片和字体的加载可以使用`file-load`和`url-loader`，
    `url-loader`与`file-load`的作用类似，但是可以限制指定大小以下的文件，
    以DataUrl的方式使用

```JavaScript
    module.exports = {
        module:{
            rules:[
                {
                    test:/\.(png|jpg|gif|svg)/,
                    use:[
                        'file-loader'
                    ]
                }
            ]
        }
    }
```

```JavaScript
    module.exports = {
        module:{
            rules:[
                {
                    test:/\.(png|jpg|gif|svg)/,
                    use:[
                        {
                            loader:'url-loader',
                            options:{
                                limit:1024*10, // 小于10KB
                            }
                        }
                    ]
                }
            ]
        }
    }
```


## CSS分离和压缩
    `mini-css-extract-plugin`插件会将CSS提取到单独的文件中

    `css-minimizer-webpack-plugin`插件会对CSS文件进行压缩，
    而且支持缓存和并发模式下运行

```JavaScript
    module.exports = {
        module: {
            rules: [
                { 
                    test: /\.css$/, 
                    use: [
                        MiniCssExtractPlugin.loader,
                        'css-loader'
                    ] 
                },
            ]
        },

        plugins: [
            new MiniCssExtractPlugin(),
        ],

        optimization:{
            minimize:true,
            minimizer:[
                new CssMinimizerPlugin()
            ],
        }
    }
```

## HTML压缩
    `html-webpack-plugin`插件除了index.html模板创建还能压缩，
    提供了minify参数用来尽心压缩配置，在production模式下默认开启

```JavaScript
    module.exports = {
        plugins:[
            new HtmlWebpackPlugin({ 
            title: 'basic',
            minify:{
                collapseWhitespace:true,
                keepClosingSlash:true,
                removeComments:true,
                removeRedundantAttributes:true,
                removeScriptTypeAttributes:true,
                removeStyleLinkTypeAttributes:true,
                useShortDoctype:true 
            }
        }),
        ]
    }
```

## JavaScript压缩
    `uglifyjs-webpack-plugin`插件可以对JavaScript文件进行压缩
    在production模式下默认开启JavaScript文件的压缩

```JavaScript
    module.exports = {
        optimization:{
            minimize:true,
            minimizer:[
                new Uglifyplugin(),
            ],
    }
    }
```





